# 2026-01-28

## [14:30] account-settings — add unsaved changes indicator and confirmation
- **Files:** `components/settings/*-form.tsx`, `components/settings/account-settings-tabs.tsx`, `app/(dashboard)/settings/account/page.tsx`
- **Why:** Users could lose unsaved changes when switching tabs or navigating away. Added visual indicators and confirmation dialogs to prevent accidental data loss.
- **Commit:** `485fc65`

## [16:23] account-settings — apply theme changes immediately
- **Files:** `components/settings/preferences-form.tsx`
- **Why:** Fulfill US-21.3 requirement for immediate theme application. Theme now changes instantly when user selects it, while still requiring save to persist to database.
- **Commit:** `6309327`

## [16:25] account-settings — add reactive form synchronization
- **Files:** `components/settings/profile-form.tsx`, `components/settings/preferences-form.tsx`, `components/settings/user-notifications-form.tsx`
- **Why:** Forms need to sync when user data changes externally via Convex's reactive updates (e.g., from another tab/session). Added useEffect to detect changes and update form values only when form is not dirty.
- **Commit:** `d3795fc`

## [17:30] dx — document optimized form loading states pattern
- **Files:** `docs/patterns/form-loading-states.md`
- **Why:** Verified that all settings forms already implement optimal loading states (non-blocking UX with button-only loading indicator). Documented the pattern for consistency and future reference.
- **Commit:** `449bb7d`

## [16:28] account-settings — add email immutability validation in backend
- **Files:** `convex/users.ts`
- **Why:** Add security layer to prevent email modification in updateProfile mutation. Although frontend marks email as read-only, backend must validate this to prevent runtime attempts to modify the email field.
- **Commit:** `1d2980d`

## [16:55] ui — fix lucide-react icon imports for build
- **Files:** `components/inventory/product-combobox.tsx`, `components/products/product-list.tsx`, `components/products/product-table.tsx`
- **Why:** Build was failing because Plant, Seedling, and Tree icons don't exist in lucide-react v0.454.0. Replaced with Sprout icon for plant-related product categories.
- **Commit:** `72dbd73`
